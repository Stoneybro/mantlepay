name: mantlepay-indexer
description: Indexer for MantlePay

field_selection:
  transaction_fields:
    - hash
    - from
    - input

networks:
  # Mantle Sepolia (chain ID 5003) - using RPC since HyperSync doesn't support this chain
  - id: 5003
    rpc_config:
      url: https://rpc.sepolia.mantle.xyz
    start_block: 33430983
    contracts:
      - name: MpSmartWallet
        handler: src/EventHandlers.ts
        events:
          - event: Executed(address indexed target, uint256 value, bytes data)
          - event: ExecutedBatch(uint256 indexed batchSize, uint256 totalValue)
          - event: Initialized(uint64 version)
          - event: IntentBatchTransferExecuted(bytes32 indexed intentId, uint256 indexed transactionCount, address indexed token, uint256 recipientCount, uint256 totalValue, uint256 failedAmount)
          - event: IntentTransferSuccess(bytes32 indexed intentId, uint256 indexed transactionCount, address indexed recipient, address token, uint256 amount)
          - event: TransferFailed(bytes32 indexed intentId, uint256 indexed transactionCount, address indexed recipient, address token, uint256 amount)
          - event: WalletAction(address indexed initiator, address indexed target, uint256 value, bytes4 indexed selector, bool success, bytes32 actionType)
          - event: ComplianceExecuted(bytes32 indexed txType, string[] entityIds, string jurisdiction, string category, string referenceId)
      - name: MpSmartWalletFactory
        address:
          - 0x43e0BC90661dAF20C6fFbae1079d6E07E88e403A
        handler: src/EventHandlers.ts
        events:
          - event: AccountCreated(address indexed account, address indexed owner)
      - name: MpIntentRegistry
        address:
          - 0x6A0C73162c20Bc56212D643112c339f654C45198
        handler: src/EventHandlers.ts
        events:
          - event: IntentCreated(address indexed wallet, bytes32 indexed intentId, address indexed token, string name, uint256 totalCommitment, uint256 totalTransactionCount, uint256 interval, uint256 duration, uint256 transactionStartTime, uint256 transactionEndTime, address[] recipients, uint256[] amounts, (string[], string, string, string) compliance)
          - event: IntentExecuted(address indexed wallet, bytes32 indexed intentId, string name, uint256 transactionCount, uint256 totalAmount)
          - event: IntentCancelled(address indexed wallet, bytes32 indexed intentId, address indexed token, string name, uint256 amountRefunded, uint256 failedAmountRecovered)
