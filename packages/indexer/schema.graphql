type Transaction @entity {
  id: ID!
  wallet_id: String!
  transactionType: TransactionType!
  timestamp: BigInt!
  blockNumber: BigInt!
  txHash: String!
  logIndex: Int!
  
  # Title for display
  title: String!
  
  # Store complete details as JSON string (matches your frontend template exactly)
  details: String!
}

enum TransactionType {
  WALLET_CREATED
  EXECUTE
  EXECUTE_BATCH
  INTENT_CREATED
  INTENT_EXECUTION
  INTENT_CANCELLED
  TRANSFER_FAILED
}

# Keep Wallet entity for aggregates
type Wallet @entity {
  id: ID!
  owner: String!
  deployedAt: BigInt!
  deployedBlock: BigInt!
  deployedTx: String!
  totalTransactionCount: Int!
  transactions: [Transaction!]! @derivedFrom(field: "wallet_id")
}

# Helper entity to store Intent state for lookup during execution
type Intent @entity {
  id: ID!
  wallet: String!
  token: String!
  name: String!
  totalTransactionCount: BigInt!
  recipients: [String!]!
  amounts: [BigInt!]!
  interval: BigInt!
  duration: BigInt!
}